import Ethereum from './ethereum';

describe('Ethereum API', () => {
  it('should get last 5 block in the blockchain', async () => {
    const blocks = await Ethereum.getLastBlocks(5);

    expect(blocks).toHaveLength(5);
  });

  it('should get the block passed by param', async () => {
    const block = await Ethereum.getBlock(8187646);
    const expectedBlock = {
      difficulty: '2263630803978458',
      extraData: '0x73696e6732',
      gasLimit: 8000029,
      gasUsed: 7951710,
      hash:
        '0xaea6219fea8ed9f2c8a9526f50e4329b197a11e26ec7d21f56e13fe876153861',
      logsBloom:
        '0x63d014409428dc0e246f801142112899221802ce601540a0038864020612101b804f00c4752de50b70254083808043042a0a70998025201114e2508b628041c462308b44048086c1b4e825eb28000025d184a0544db80690f9b005200233043c48055353a2a680ab80cc3a5a0129083aca01120e010506112213451a1190808314902116008a412060d704a10915814765920229a20b00280020724100189d02220a83b1a8224004c44861f1b511c584806446206402844f0849b4a138a210300028192225671229561e12110401661002506c25404250c30802ac220312f00d4e92051302180a1305220044610282a74ba00041e200c59084610a32847670aa',
      miner: '0xb2930B35844a230f00E51431aCAe96Fe543a0347',
      mixHash:
        '0x43d6fdb39742a1af266ed0242b7c61e4e5f687feeedd56f3acf6ad1500cba067',
      nonce: '0xe24df080014a6b03',
      number: 8187646,
      parentHash:
        '0x5d039624752f5b6a46ffcd039c55de96cd2ee8afd3f246a252cff9825f6207f4',
      receiptsRoot:
        '0x03a917ce758ca50a257707f473c59c177636e04f71065825b9b91247d4070572',
      sha3Uncles:
        '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
      size: 10564,
      stateRoot:
        '0xc615ec35b0f6f7845e4f4df7108b2edd08fc242d065c76c6a816114d47cdc4b2',
      timestamp: 1563626491,
      totalDifficulty: '11097620611196358826982',
      transactions: [
        '0xc52695f54ba52b549d0b8f50de5158a85823f9a61db8f822d7a2fefee71a0b78',
        '0x7454ac58af6cf3ef94709ddd51f6c4986ef872387d711fdcd7a722d759a0e37d',
        '0x997210bdd7b3200ded8332fd05881a0c85596d6b14e0e48ffe6423ac96af112f',
        '0x363d589ee62a11ae151a51e5467661feca8c746bcdcabd2e228803d0b960a326',
        '0xb9c00b9e6ef5cd568d18a2e64594b7913351c81ebe0d21424567d8f2492d1ee1',
        '0xc7ef17d000acb92f0d48c890b61fec6d33ed338edc2685e9212855b861e9745f',
        '0x8f049bc5d1c755e6cd4f09c7556462f81050f4c8c31db504b9a64292c80c43bc',
        '0xddc9fa429c2ff74588c0fd77611d6c7fd9995347a09f5120b509391ce749bbff',
        '0xa2d2a2655634affccba7146a8d5397d7fb74ebc41d5a0092cc715b3d24d84a8f',
        '0x1160cd6ac47324be3c56d4b98ee1bad89285e2cdff3af1cfefb66bde6edd37c6',
        '0x4177e0e7d520b9079dbbb8edc0174c5a4106a8e37587474c481976d3d80c9a49',
        '0x9ad380d9c2216bb8263b96441065a0476d0479e6a195771e42ce35686d5715b8',
        '0x398271eed1a5c0e66c372f480ced73d48c923603e61a5b4fd971958b922b4e5e',
        '0x2f84e71832adee5ed4a0670d40c4d8b90f1351c78ca87255436db9b9d0e7db72',
        '0x3503ab0fa912480fc562ea07a5c2dc02cf84edf4fb93def856aea01f6973f62d',
      ],
      transactionsRoot:
        '0x969e30b41421d06d6f020bb6dc3a4508e437a6dfa201144ee893e5f4d4ffb349',
      uncles: [],
    };

    expect(block).toEqual(expectedBlock);
  });
});
